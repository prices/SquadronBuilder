<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <title>
            Robotech RPG Tactics SquadronBuilder
        </title>
        <link rel="stylesheet" href="css/default.css" />
        <link rel="stylesheet" href="contrib/simplegrid.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="contrib/svg.min.js" type="text/javascript"></script>
        <script src="contrib/underscore.js" type="text/javascript"></script>
        <script src="js/squadronbuilder.js" type="text/javascript"></script>
    </head>
    <body onload="load()">
        <h3>Choose a Faction</h3>
        <select name="faction" id="faction" onChange="faction.resetChoices(this.value)" class="faction">
            <option value="UEDF">United Earth Defense Force</option>
            <option value="Zentraedi">Zentraedi Armada</option>
            <option value="Malcontents">Malcontents</option>
        </select>
        <h3>Force Choices</h3>
        <hr />
        <div id="choices" class="choices">
        </div>
        <hr />
        <div class="grid grid-pad toolbar">
            <button class="col-2-12 addRow" onClick="addrow()">Add Row</button>
            <button class="col-2-12 render" onClick="render()">Render</button>
        </div>
        <script type="text/javascript">
            var win = [];
            var coreforce = [];
            var pages = []
            var faction = new SquadronBuilder.faction("choices");

            function load()
            {
                var f = document.getElementById('faction');
                var fact = f.options[f.selectedIndex].value;
                faction.resetChoices(fact);
            }
            function render()
            {
                coreforce = faction.getCoreForce();
                for (var i = 0; i < faction.getCount(); i++) {
                    win.push(window.open("force.svg", i+'.0'));
                    pages[i] = 0;
                }
            }
            function renderPage(name)
            {
                var ind = name.split('.');
                var index = ind[0];
                var page  = ind[1];
                console.log(index);
                console.log(page);
                var svg = win[index].document.getElementById('svgmain');
                console.log(svg);
                if (svg) {
                    var height = parseInt(svg.getAttribute("height"), 10);
                    var width = parseInt(svg.getAttribute("width"), 10);
                    var canvas = SVG(svg);
                    coreforce[index].canvas(canvas);
                    coreforce[index].render(page, width, height);
                }
            }
        </script>
<script type="text/template" id="forceChoices">
</script>


    </body>
</html>

